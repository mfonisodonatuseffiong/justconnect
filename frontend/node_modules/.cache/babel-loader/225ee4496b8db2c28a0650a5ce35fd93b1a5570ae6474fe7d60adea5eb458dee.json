{"ast":null,"code":"const handleSubmit = async e => {\n  e.preventDefault();\n  setError(\"\");\n  try {\n    var _result$user;\n    const response = await fetch(\"http://localhost:5000/api/auth/professional-login\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(professionalData)\n    });\n    if (!response.ok) {\n      const errorText = await response.text();\n      console.error(\"Backend Error Response:\", errorText);\n      throw new Error(\"Login failed: \" + errorText);\n    }\n    const result = await response.json();\n    console.log(\"Professional Login Response:\", result);\n\n    // ✅ Corrected: Extract role and name from result.user\n    if (!result.token || ((_result$user = result.user) === null || _result$user === void 0 ? void 0 : _result$user.role) !== \"professional\") {\n      throw new Error(\"Invalid server response: Missing token or incorrect role.\");\n    }\n\n    // ✅ Store correct user info\n    localStorage.setItem(\"token\", result.token);\n    localStorage.setItem(\"role\", result.user.role);\n    localStorage.setItem(\"name\", result.user.name);\n    alert(\"Login successful!\");\n\n    // ✅ Navigate to professional dashboard\n    window.location.href = \"/professional-dashboard\";\n  } catch (error) {\n    console.error(\"Login Error:\", error.message);\n    setError(error.message);\n  }\n};","map":{"version":3,"names":["handleSubmit","e","preventDefault","setError","_result$user","response","fetch","method","headers","body","JSON","stringify","professionalData","ok","errorText","text","console","error","Error","result","json","log","token","user","role","localStorage","setItem","name","alert","window","location","href","message"],"sources":["/home/donatech/justconnect/frontend/src/components/ProfessionalLogin.js"],"sourcesContent":["const handleSubmit = async (e) => {\n  e.preventDefault();\n  setError(\"\");\n\n  try {\n    const response = await fetch(\"http://localhost:5000/api/auth/professional-login\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(professionalData),\n    });\n\n    if (!response.ok) {\n      const errorText = await response.text();\n      console.error(\"Backend Error Response:\", errorText);\n      throw new Error(\"Login failed: \" + errorText);\n    }\n\n    const result = await response.json();\n    console.log(\"Professional Login Response:\", result);\n\n    // ✅ Corrected: Extract role and name from result.user\n    if (!result.token || result.user?.role !== \"professional\") {\n      throw new Error(\"Invalid server response: Missing token or incorrect role.\");\n    }\n\n    // ✅ Store correct user info\n    localStorage.setItem(\"token\", result.token);\n    localStorage.setItem(\"role\", result.user.role);\n    localStorage.setItem(\"name\", result.user.name);\n\n    alert(\"Login successful!\");\n\n    // ✅ Navigate to professional dashboard\n    window.location.href = \"/professional-dashboard\";\n\n  } catch (error) {\n    console.error(\"Login Error:\", error.message);\n    setError(error.message);\n  }\n};\n"],"mappings":"AAAA,MAAMA,YAAY,GAAG,MAAOC,CAAC,IAAK;EAChCA,CAAC,CAACC,cAAc,CAAC,CAAC;EAClBC,QAAQ,CAAC,EAAE,CAAC;EAEZ,IAAI;IAAA,IAAAC,YAAA;IACF,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,mDAAmD,EAAE;MAChFC,MAAM,EAAE,MAAM;MACdC,OAAO,EAAE;QAAE,cAAc,EAAE;MAAmB,CAAC;MAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACC,gBAAgB;IACvC,CAAC,CAAC;IAEF,IAAI,CAACP,QAAQ,CAACQ,EAAE,EAAE;MAChB,MAAMC,SAAS,GAAG,MAAMT,QAAQ,CAACU,IAAI,CAAC,CAAC;MACvCC,OAAO,CAACC,KAAK,CAAC,yBAAyB,EAAEH,SAAS,CAAC;MACnD,MAAM,IAAII,KAAK,CAAC,gBAAgB,GAAGJ,SAAS,CAAC;IAC/C;IAEA,MAAMK,MAAM,GAAG,MAAMd,QAAQ,CAACe,IAAI,CAAC,CAAC;IACpCJ,OAAO,CAACK,GAAG,CAAC,8BAA8B,EAAEF,MAAM,CAAC;;IAEnD;IACA,IAAI,CAACA,MAAM,CAACG,KAAK,IAAI,EAAAlB,YAAA,GAAAe,MAAM,CAACI,IAAI,cAAAnB,YAAA,uBAAXA,YAAA,CAAaoB,IAAI,MAAK,cAAc,EAAE;MACzD,MAAM,IAAIN,KAAK,CAAC,2DAA2D,CAAC;IAC9E;;IAEA;IACAO,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEP,MAAM,CAACG,KAAK,CAAC;IAC3CG,YAAY,CAACC,OAAO,CAAC,MAAM,EAAEP,MAAM,CAACI,IAAI,CAACC,IAAI,CAAC;IAC9CC,YAAY,CAACC,OAAO,CAAC,MAAM,EAAEP,MAAM,CAACI,IAAI,CAACI,IAAI,CAAC;IAE9CC,KAAK,CAAC,mBAAmB,CAAC;;IAE1B;IACAC,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,yBAAyB;EAElD,CAAC,CAAC,OAAOd,KAAK,EAAE;IACdD,OAAO,CAACC,KAAK,CAAC,cAAc,EAAEA,KAAK,CAACe,OAAO,CAAC;IAC5C7B,QAAQ,CAACc,KAAK,CAACe,OAAO,CAAC;EACzB;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}